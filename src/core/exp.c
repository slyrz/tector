#include "config.h"
#include "exp.h"

#include <math.h>

static float exp_table[1024] = {
  0.0024726232, 0.0025016967, 0.0025311113, 0.0025608708, 0.0025909794,
  0.0026214409, 0.0026522597, 0.0026834398, 0.0027149855, 0.0027469009,
  0.0027791906, 0.0028118587, 0.0028449097, 0.0028783480, 0.0029121783,
  0.0029464050, 0.0029810327, 0.0030160662, 0.0030515102, 0.0030873693,
  0.0031236486, 0.0031603528, 0.0031974869, 0.0032350560, 0.0032730650,
  0.0033115191, 0.0033504234, 0.0033897833, 0.0034296039, 0.0034698907,
  0.0035106491, 0.0035518845, 0.0035936026, 0.0036358088, 0.0036785089,
  0.0037217087, 0.0037654138, 0.0038096302, 0.0038543638, 0.0038996207,
  0.0039454068, 0.0039917284, 0.0040385916, 0.0040860027, 0.0041339681,
  0.0041824942, 0.0042315875, 0.0042812545, 0.0043315020, 0.0043823366,
  0.0044337652, 0.0044857946, 0.0045384317, 0.0045916837, 0.0046455575,
  0.0047000605, 0.0047551999, 0.0048109830, 0.0048674173, 0.0049245104,
  0.0049822697, 0.0050407031, 0.0050998183, 0.0051596232, 0.0052201257,
  0.0052813339, 0.0053432560, 0.0054059001, 0.0054692746, 0.0055333879,
  0.0055982486, 0.0056638652, 0.0057302465, 0.0057974013, 0.0058653384,
  0.0059340668, 0.0060035958, 0.0060739344, 0.0061450921, 0.0062170781,
  0.0062899021, 0.0063635737, 0.0064381026, 0.0065134986, 0.0065897717,
  0.0066669319, 0.0067449895, 0.0068239548, 0.0069038381, 0.0069846499,
  0.0070664010, 0.0071491020, 0.0072327638, 0.0073173975, 0.0074030141,
  0.0074896249, 0.0075772413, 0.0076658747, 0.0077555368, 0.0078462393,
  0.0079379941, 0.0080308132, 0.0081247088, 0.0082196931, 0.0083157785,
  0.0084129776, 0.0085113030, 0.0086107677, 0.0087113845, 0.0088131665,
  0.0089161271, 0.0090202795, 0.0091256374, 0.0092322144, 0.0093400244,
  0.0094490813, 0.0095593993, 0.0096709928, 0.0097838760, 0.0098980637,
  0.0100135706, 0.0101304117, 0.0102486019, 0.0103681567, 0.0104890913,
  0.0106114213, 0.0107351626, 0.0108603310, 0.0109869426, 0.0111150137,
  0.0112445607, 0.0113756002, 0.0115081491, 0.0116422242, 0.0117778427,
  0.0119150220, 0.0120537795, 0.0121941330, 0.0123361004, 0.0124796997,
  0.0126249493, 0.0127718675, 0.0129204730, 0.0130707848, 0.0132228218,
  0.0133766032, 0.0135321487, 0.0136894777, 0.0138486102, 0.0140095663,
  0.0141723662, 0.0143370304, 0.0145035797, 0.0146720349, 0.0148424172,
  0.0150147480, 0.0151890488, 0.0153653414, 0.0155436479, 0.0157239905,
  0.0159063917, 0.0160908742, 0.0162774609, 0.0164661750, 0.0166570400,
  0.0168500794, 0.0170453173, 0.0172427776, 0.0174424847, 0.0176444634,
  0.0178487384, 0.0180553350, 0.0182642784, 0.0184755942, 0.0186893084,
  0.0189054471, 0.0191240368, 0.0193451039, 0.0195686756, 0.0197947789,
  0.0200234413, 0.0202546906, 0.0204885547, 0.0207250619, 0.0209642408,
  0.0212061202, 0.0214507292, 0.0216980971, 0.0219482537, 0.0222012289,
  0.0224570529, 0.0227157563, 0.0229773699, 0.0232419248, 0.0235094524,
  0.0237799844, 0.0240535529, 0.0243301901, 0.0246099286, 0.0248928014,
  0.0251788417, 0.0254680830, 0.0257605591, 0.0260563043, 0.0263553528,
  0.0266577397, 0.0269634999, 0.0272726688, 0.0275852822, 0.0279013762,
  0.0282209871, 0.0285441517, 0.0288709069, 0.0292012902, 0.0295353393,
  0.0298730921, 0.0302145871, 0.0305598629, 0.0309089585, 0.0312619134,
  0.0316187673, 0.0319795601, 0.0323443324, 0.0327131248, 0.0330859784,
  0.0334629347, 0.0338440353, 0.0342293226, 0.0346188388, 0.0350126269,
  0.0354107301, 0.0358131918, 0.0362200559, 0.0366313666, 0.0370471687,
  0.0374675069, 0.0378924266, 0.0383219735, 0.0387561936, 0.0391951332,
  0.0396388391, 0.0400873584, 0.0405407385, 0.0409990272, 0.0414622727,
  0.0419305236, 0.0424038286, 0.0428822372, 0.0433657988, 0.0438545634,
  0.0443485814, 0.0448479034, 0.0453525806, 0.0458626642, 0.0463782060,
  0.0468992582, 0.0474258732, 0.0479581038, 0.0484960032, 0.0490396250,
  0.0495890230, 0.0501442514, 0.0507053648, 0.0512724181, 0.0518454666,
  0.0524245660, 0.0530097720, 0.0536011411, 0.0541987298, 0.0548025952,
  0.0554127944, 0.0560293851, 0.0566524253, 0.0572819732, 0.0579180874,
  0.0585608269, 0.0592102507, 0.0598664186, 0.0605293902, 0.0611992258,
  0.0618759857, 0.0625597308, 0.0632505220, 0.0639484207, 0.0646534884,
  0.0653657870, 0.0660853787, 0.0668123258, 0.0675466911, 0.0682885375,
  0.0690379282, 0.0697949265, 0.0705595962, 0.0713320011, 0.0721122054,
  0.0729002734, 0.0736962697, 0.0745002590, 0.0753123063, 0.0761324768,
  0.0769608357, 0.0777974486, 0.0786423812, 0.0794956993, 0.0803574688,
  0.0812277560, 0.0821066270, 0.0829941484, 0.0838903864, 0.0847954078,
  0.0857092793, 0.0866320676, 0.0875638395, 0.0885046621, 0.0894546022,
  0.0904137268, 0.0913821031, 0.0923597979, 0.0933468785, 0.0943434118,
  0.0953494649, 0.0963651047, 0.0973903983, 0.0984254124, 0.0994702139,
  0.1005248695, 0.1015894459, 0.1026640096, 0.1037486269, 0.1048433640,
  0.1059482871, 0.1070634621, 0.1081889546, 0.1093248301, 0.1104711539,
  0.1116279910, 0.1127954063, 0.1139734641, 0.1151622287, 0.1163617640,
  0.1175721335, 0.1187934005, 0.1200256278, 0.1212688777, 0.1225232125,
  0.1237886937, 0.1250653825, 0.1263533396, 0.1276526253, 0.1289632993,
  0.1302854207, 0.1316190484, 0.1329642402, 0.1343210538, 0.1356895460,
  0.1370697730, 0.1384617906, 0.1398656535, 0.1412814160, 0.1427091316,
  0.1441488530, 0.1456006323, 0.1470645205, 0.1485405680, 0.1500288243,
  0.1515293382, 0.1530421572, 0.1545673284, 0.1561048974, 0.1576549094,
  0.1592174081, 0.1607924366, 0.1623800367, 0.1639802491, 0.1655931136,
  0.1672186688, 0.1688569521, 0.1705079998, 0.1721718470, 0.1738485274,
  0.1755380736, 0.1772405171, 0.1789558877, 0.1806842142, 0.1824255238,
  0.1841798425, 0.1859471949, 0.1877276040, 0.1895210913, 0.1913276771,
  0.1931473800, 0.1949802170, 0.1968262036, 0.1986853538, 0.2005576797,
  0.2024431921, 0.2043418999, 0.2062538104, 0.2081789291, 0.2101172597,
  0.2120688044, 0.2140335632, 0.2160115347, 0.2180027153, 0.2200070997,
  0.2220246808, 0.2240554492, 0.2260993940, 0.2281565022, 0.2302267585,
  0.2323101461, 0.2344066458, 0.2365162364, 0.2386388949, 0.2407745958,
  0.2429233117, 0.2450850131, 0.2472596683, 0.2494472435, 0.2516477024,
  0.2538610070, 0.2560871166, 0.2583259886, 0.2605775779, 0.2628418374,
  0.2651187174, 0.2674081662, 0.2697101296, 0.2720245511, 0.2743513720,
  0.2766905310, 0.2790419648, 0.2814056074, 0.2837813907, 0.2861692440,
  0.2885690943, 0.2909808662, 0.2934044820, 0.2958398616, 0.2982869222,
  0.3007455789, 0.3032157444, 0.3056973288, 0.3081902400, 0.3106943832,
  0.3132096615, 0.3157359755, 0.3182732234, 0.3208213008, 0.3233801013,
  0.3259495159, 0.3285294333, 0.3311197396, 0.3337203190, 0.3363310529,
  0.3389518208, 0.3415824994, 0.3442229636, 0.3468730858, 0.3495327360,
  0.3522017820, 0.3548800897, 0.3575675224, 0.3602639413, 0.3629692055,
  0.3656831720, 0.3684056956, 0.3711366290, 0.3738758228, 0.3766231256,
  0.3793783841, 0.3821414429, 0.3849121445, 0.3876903297, 0.3904758374,
  0.3932685046, 0.3960681663, 0.3988746559, 0.4016878051, 0.4045074438,
  0.4073334000, 0.4101655006, 0.4130035703, 0.4158474326, 0.4186969094,
  0.4215518211, 0.4244119867, 0.4272772238, 0.4301473486, 0.4330221761,
  0.4359015200, 0.4387851927, 0.4416730057, 0.4445647690, 0.4474602919,
  0.4503593825, 0.4532618480, 0.4561674946, 0.4590761278, 0.4619875521,
  0.4649015714, 0.4678179887, 0.4707366066, 0.4736572270, 0.4765796511,
  0.4795036797, 0.4824291134, 0.4853557520, 0.4882833953, 0.4912118426,
  0.4941408932, 0.4970703460, 0.5000000000, 0.5029296540, 0.5058591068,
  0.5087881574, 0.5117166047, 0.5146442480, 0.5175708866, 0.5204963203,
  0.5234203489, 0.5263427730, 0.5292633934, 0.5321820113, 0.5350984286,
  0.5380124479, 0.5409238722, 0.5438325054, 0.5467381520, 0.5496406175,
  0.5525397081, 0.5554352310, 0.5583269943, 0.5612148073, 0.5640984800,
  0.5669778239, 0.5698526514, 0.5727227762, 0.5755880133, 0.5784481789,
  0.5813030906, 0.5841525674, 0.5869964297, 0.5898344994, 0.5926666000,
  0.5954925562, 0.5983121949, 0.6011253441, 0.6039318337, 0.6067314954,
  0.6095241626, 0.6123096703, 0.6150878555, 0.6178585571, 0.6206216159,
  0.6233768744, 0.6261241772, 0.6288633710, 0.6315943044, 0.6343168280,
  0.6370307945, 0.6397360587, 0.6424324776, 0.6451199103, 0.6477982180,
  0.6504672640, 0.6531269142, 0.6557770364, 0.6584175006, 0.6610481792,
  0.6636689471, 0.6662796810, 0.6688802604, 0.6714705667, 0.6740504841,
  0.6766198987, 0.6791786992, 0.6817267766, 0.6842640245, 0.6867903385,
  0.6893056168, 0.6918097600, 0.6943026712, 0.6967842556, 0.6992544211,
  0.7017130778, 0.7041601384, 0.7065955180, 0.7090191338, 0.7114309057,
  0.7138307560, 0.7162186093, 0.7185943926, 0.7209580352, 0.7233094690,
  0.7256486280, 0.7279754489, 0.7302898704, 0.7325918338, 0.7348812826,
  0.7371581626, 0.7394224221, 0.7416740114, 0.7439128834, 0.7461389930,
  0.7483522976, 0.7505527565, 0.7527403317, 0.7549149869, 0.7570766883,
  0.7592254042, 0.7613611051, 0.7634837636, 0.7655933542, 0.7676898539,
  0.7697732415, 0.7718434978, 0.7739006060, 0.7759445508, 0.7779753192,
  0.7799929003, 0.7819972847, 0.7839884653, 0.7859664368, 0.7879311956,
  0.7898827403, 0.7918210709, 0.7937461896, 0.7956581001, 0.7975568079,
  0.7994423203, 0.8013146462, 0.8031737964, 0.8050197830, 0.8068526200,
  0.8086723229, 0.8104789087, 0.8122723960, 0.8140528051, 0.8158201575,
  0.8175744762, 0.8193157858, 0.8210441123, 0.8227594829, 0.8244619264,
  0.8261514726, 0.8278281530, 0.8294920002, 0.8311430479, 0.8327813312,
  0.8344068864, 0.8360197509, 0.8376199633, 0.8392075634, 0.8407825919,
  0.8423450906, 0.8438951026, 0.8454326716, 0.8469578428, 0.8484706618,
  0.8499711757, 0.8514594320, 0.8529354795, 0.8543993677, 0.8558511470,
  0.8572908684, 0.8587185840, 0.8601343465, 0.8615382094, 0.8629302270,
  0.8643104540, 0.8656789462, 0.8670357598, 0.8683809516, 0.8697145793,
  0.8710367007, 0.8723473747, 0.8736466604, 0.8749346175, 0.8762113063,
  0.8774767875, 0.8787311223, 0.8799743722, 0.8812065995, 0.8824278665,
  0.8836382360, 0.8848377713, 0.8860265359, 0.8872045937, 0.8883720090,
  0.8895288461, 0.8906751699, 0.8918110454, 0.8929365379, 0.8940517129,
  0.8951566360, 0.8962513731, 0.8973359904, 0.8984105541, 0.8994751305,
  0.9005297861, 0.9015745876, 0.9026096017, 0.9036348953, 0.9046505351,
  0.9056565882, 0.9066531215, 0.9076402021, 0.9086178969, 0.9095862732,
  0.9105453978, 0.9114953379, 0.9124361605, 0.9133679324, 0.9142907207,
  0.9152045922, 0.9161096136, 0.9170058516, 0.9178933730, 0.9187722440,
  0.9196425312, 0.9205043007, 0.9213576188, 0.9222025514, 0.9230391643,
  0.9238675232, 0.9246876937, 0.9254997410, 0.9263037303, 0.9270997266,
  0.9278877946, 0.9286679989, 0.9294404038, 0.9302050735, 0.9309620718,
  0.9317114625, 0.9324533089, 0.9331876742, 0.9339146213, 0.9346342130,
  0.9353465116, 0.9360515793, 0.9367494780, 0.9374402692, 0.9381240143,
  0.9388007742, 0.9394706098, 0.9401335814, 0.9407897493, 0.9414391731,
  0.9420819126, 0.9427180268, 0.9433475747, 0.9439706149, 0.9445872056,
  0.9451974048, 0.9458012702, 0.9463988589, 0.9469902280, 0.9475754340,
  0.9481545334, 0.9487275819, 0.9492946352, 0.9498557486, 0.9504109770,
  0.9509603750, 0.9515039968, 0.9520418962, 0.9525741268, 0.9531007418,
  0.9536217940, 0.9541373358, 0.9546474194, 0.9551520966, 0.9556514186,
  0.9561454366, 0.9566342012, 0.9571177628, 0.9575961714, 0.9580694764,
  0.9585377273, 0.9590009728, 0.9594592615, 0.9599126416, 0.9603611609,
  0.9608048668, 0.9612438064, 0.9616780265, 0.9621075734, 0.9625324931,
  0.9629528313, 0.9633686334, 0.9637799441, 0.9641868082, 0.9645892699,
  0.9649873731, 0.9653811612, 0.9657706774, 0.9661559647, 0.9665370653,
  0.9669140216, 0.9672868752, 0.9676556676, 0.9680204399, 0.9683812327,
  0.9687380866, 0.9690910415, 0.9694401371, 0.9697854129, 0.9701269079,
  0.9704646607, 0.9707987098, 0.9711290931, 0.9714558483, 0.9717790129,
  0.9720986238, 0.9724147178, 0.9727273312, 0.9730365001, 0.9733422603,
  0.9736446472, 0.9739436957, 0.9742394409, 0.9745319170, 0.9748211583,
  0.9751071986, 0.9753900714, 0.9756698099, 0.9759464471, 0.9762200156,
  0.9764905476, 0.9767580752, 0.9770226301, 0.9772842437, 0.9775429471,
  0.9777987711, 0.9780517463, 0.9783019029, 0.9785492708, 0.9787938798,
  0.9790357592, 0.9792749381, 0.9795114453, 0.9797453094, 0.9799765587,
  0.9802052211, 0.9804313244, 0.9806548961, 0.9808759632, 0.9810945529,
  0.9813106916, 0.9815244058, 0.9817357216, 0.9819446650, 0.9821512616,
  0.9823555366, 0.9825575153, 0.9827572224, 0.9829546827, 0.9831499206,
  0.9833429600, 0.9835338250, 0.9837225391, 0.9839091258, 0.9840936083,
  0.9842760095, 0.9844563521, 0.9846346586, 0.9848109512, 0.9849852520,
  0.9851575828, 0.9853279651, 0.9854964203, 0.9856629696, 0.9858276338,
  0.9859904337, 0.9861513898, 0.9863105223, 0.9864678513, 0.9866233968,
  0.9867771782, 0.9869292152, 0.9870795270, 0.9872281325, 0.9873750507,
  0.9875203003, 0.9876638996, 0.9878058670, 0.9879462205, 0.9880849780,
  0.9882221573, 0.9883577758, 0.9884918509, 0.9886243998, 0.9887554393,
  0.9888849863, 0.9890130574, 0.9891396690, 0.9892648374, 0.9893885787,
  0.9895109087, 0.9896318433, 0.9897513981, 0.9898695883, 0.9899864294,
  0.9901019363, 0.9902161240, 0.9903290072, 0.9904406007, 0.9905509187,
  0.9906599756, 0.9907677856, 0.9908743626, 0.9909797205, 0.9910838729,
  0.9911868335, 0.9912886155, 0.9913892323, 0.9914886970, 0.9915870224,
  0.9916842215, 0.9917803069, 0.9918752912, 0.9919691868, 0.9920620059,
  0.9921537607, 0.9922444632, 0.9923341253, 0.9924227587, 0.9925103751,
  0.9925969859, 0.9926826025, 0.9927672362, 0.9928508980, 0.9929335990,
  0.9930153501, 0.9930961619, 0.9931760452, 0.9932550105, 0.9933330681,
  0.9934102283, 0.9934865014, 0.9935618974, 0.9936364263, 0.9937100979,
  0.9937829219, 0.9938549079, 0.9939260656, 0.9939964042, 0.9940659332,
  0.9941346616, 0.9942025987, 0.9942697535, 0.9943361348, 0.9944017514,
  0.9944666121, 0.9945307254, 0.9945940999, 0.9946567440, 0.9947186661,
  0.9947798743, 0.9948403768, 0.9949001817, 0.9949592969, 0.9950177303,
  0.9950754896, 0.9951325827, 0.9951890170, 0.9952448001, 0.9952999395,
  0.9953544425, 0.9954083163, 0.9954615683, 0.9955142054, 0.9955662348,
  0.9956176634, 0.9956684980, 0.9957187455, 0.9957684125, 0.9958175058,
  0.9958660319, 0.9959139973, 0.9959614084, 0.9960082716, 0.9960545932,
  0.9961003793, 0.9961456362, 0.9961903698, 0.9962345862, 0.9962782913,
  0.9963214911, 0.9963641912, 0.9964063974, 0.9964481155, 0.9964893509,
  0.9965301093, 0.9965703961, 0.9966102167, 0.9966495766, 0.9966884809,
  0.9967269350, 0.9967649440, 0.9968025131, 0.9968396472, 0.9968763514,
  0.9969126307, 0.9969484898, 0.9969839338, 0.9970189673, 0.9970535950,
  0.9970878217, 0.9971216520, 0.9971550903, 0.9971881413, 0.9972208094,
  0.9972530991, 0.9972850145, 0.9973165602, 0.9973477403, 0.9973785591,
  0.9974090206, 0.9974391292, 0.9974688887, 0.9974983033,
};

float
expf (float x)
{
  if (fabsf (x) >= 6.0)
    return -1.0;
  return exp_table[(int) ((x + 6.0) * (1024.0 / 6.0 / 2.0))];
}
